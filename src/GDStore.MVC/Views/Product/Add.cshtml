@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@model GDStore.ViewModel.Products.ProductCreateRequest
@{
    ViewData["Title"] = "Thêm sản phẩm";
}

<h1 class="title-content">Thêm sản phẩm</h1>
<div class="mt-5">
    <form asp-action="AddHandle" asp-controller="Product" method="post" enctype="multipart/form-data">
        <div class="form-group">
            <label for="">Tên sản phẩm</label>
            <input type="text" asp-for="Name" class="form-control">
            <span asp-validation-for="Name" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label for="">Mô tả</label>
            <input type="text" asp-for="Description" class="form-control">
            <span asp-validation-for="Description" class="text-danger"></span>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="">Giá gốc</label>
                    <input type="number" asp-for="OriginalPrice" class="form-control">
                    <span asp-validation-for="OriginalPrice" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="">Giá giao dịch</label>
                    <input type="number" asp-for="Price" class="form-control">
                    <span asp-validation-for="Price" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="">Nhãn hiệu</label>
                    <select name="BrandId" id="" class="form-control">
                        <option>1</option>
                    </select>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="">Danh mục</label>
                    <select name="CategoryIds" id="" class="form-control">
                        <option>1</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3">
                <div class="card">
                    <div class="card-header">
                        Ảnh sản phẩm
                    </div>
                    <div class="card-body">
                        <label for="ChooseImg" class="icon-chooseImg">
                            <i class="fas fa-plus-circle fa-3x" aria-hidden="true"></i> Thêm
                            ảnh
                        </label>
                        <input type="file" name="files" id="ChooseImg" class="d-none" multiple>
                    </div>
                </div>
            </div>
            <div class="col-md-9">
                <div class="rg-previewImg d-flex">
                    <!-- <div class="wrapperImg">
                        <img class="img-product" src="/img/product/female/product-1.webp" alt="">
                    </div>
                     -->
                </div>
            </div>
        </div>
        <button type="submit" class="btn btn-success mt-3"><i class="fas fa-save"></i> Ghi lại</button>
    </form>
</div>

@section Scripts {
    <script type="text/javascript">
        $("#ChooseImg").on("change", function () {
            show(this);
        });

        function show(input) {
            const rgPreviewImg = $(".rg-previewImg")
            if (input.files && input.files[0]) {
                const imgs = input.files.length;
                for (let i = 0; i < imgs; i++) {
                    var filerdr = new FileReader();
                    filerdr.onload = function (e) {
                        rgPreviewImg.append("<div class='wrapperImg text-center'>" +
                            "<img class='img-product' src='" + e.target.result + "' alt=''>" +
                            "<i class='fas fa-trash-alt text-danger btn-deleteImg'></i>"
                            + "</div>")
                    }
                    filerdr.readAsDataURL(input.files[i]);
                }
            }
        }
    </script>
    <partial name="_ValidationScriptsPartial" />
}
